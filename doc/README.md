# AI Stock Bot - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è AI Stock Bot - —Å–∏—Å—Ç–µ–º—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ AI –º–æ–¥–µ–ª—è–º–∏, –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π –ø–ª–∞—Ç–µ–∂–µ–π YooMoney –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å—Ç–æ–∫–æ–≤—ã–µ –ø–ª–æ—â–∞–¥–∫–∏.

## üìö –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –¥–∏–∞–≥—Ä–∞–º–º—ã
- **[C4 Component Diagram](#c4-component-diagram)** - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ —Å–∏—Å—Ç–µ–º—ã
- **[–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –æ–±–∑–æ—Ä](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π-–æ–±–∑–æ—Ä)** - –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### üîß –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞
- **[ADMIN_API_GUIDE.md](ADMIN_API_GUIDE.md)** - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ Admin API
- **[PRODUCTION.md](PRODUCTION.md)** - –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ —Å Docker

### ü§ñ AI –º–æ–¥–µ–ª–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- **[AI_MODELS_GUIDE.md](AI_MODELS_GUIDE.md)** - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ AI –º–æ–¥–µ–ª—è–º –∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º
- **[DYNAMIC_AI_MODELS.md](DYNAMIC_AI_MODELS.md)** - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ AI –º–æ–¥–µ–ª—è–º–∏

### üí≥ –ü–ª–∞—Ç–µ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- **[PAYMENT_SYSTEM_GUIDE.md](PAYMENT_SYSTEM_GUIDE.md)** - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è YooMoney –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏

### üìñ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **[../backend/README.md](../backend/README.md)** - Backend API —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **[../tg-bot/README.md](../tg-bot/README.md)** - Telegram Bot —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **[../README.md](../README.md)** - –û–±—â–∏–π –æ–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

---

## üìä –î–∏–∞–≥—Ä–∞–º–º—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### C4 Component Diagram
–§–∞–π–ª `c4-components.puml` —Å–æ–¥–µ—Ä–∂–∏—Ç C4 –¥–∏–∞–≥—Ä–∞–º–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–ª—è AI Stock Bot.

### C4 Database Structure Diagram
–§–∞–π–ª `c4-database-structure.puml` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é –¥–∏–∞–≥—Ä–∞–º–º—É —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö MongoDB —Å –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏, —Å–≤—è–∑—è–º–∏ –∏ –∏–Ω–¥–µ–∫—Å–∞–º–∏.

### –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–∏–∞–≥—Ä–∞–º–º—ã –≤ VSCode

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ PlantUML**:
   - Extensions ‚Üí –ü–æ–∏—Å–∫ "PlantUML" (–∞–≤—Ç–æ—Ä jebbs) ‚Üí Install

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ PlantUML**:
   ```json
   {
     "plantuml.render": "PlantUMLServer",
     "plantuml.server": "https://www.plantuml.com/plantuml"
   }
   ```

3. **–ü—Ä–æ—Å–º–æ—Ç—Ä –¥–∏–∞–≥—Ä–∞–º–º—ã**:
   - –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `c4-components.puml`
   - –ù–∞–∂–º–∏—Ç–µ `Alt+D` (Windows/Linux) –∏–ª–∏ `Cmd+D` (Mac)

4. **–û–Ω–ª–∞–π–Ω –ø—Ä–æ—Å–º–æ—Ç—Ä**: [PlantUML Online Server](http://www.plantuml.com/plantuml/uml/)

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –æ–±–∑–æ—Ä

### üèóÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

#### 1. Frontend Interfaces
- **Telegram Bot** - –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **Web Interface** - –ø–ª–∞–Ω–∏—Ä—É–µ–º—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

#### 2. Backend API (Express.js)
- **API Gateway** - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
- **Controllers** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- **Middleware Stack** - –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –≤–∞–ª–∏–¥–∞—Ü–∏—è, rate limiting
- **Services** - –æ—Å–Ω–æ–≤–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

#### 3. AI Providers Layer
- **OpenAI Service** - DALL-E 3 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- **Segmind Services** - –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ AI –º–æ–¥–µ–ª–∏
- **Fallback System** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏

#### 4. Data Layer
- **MongoDB** - –æ—Å–Ω–æ–≤–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **File Storage** - –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **Configuration Management** - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

#### 5. External Integrations
- **YooMoney** - –ø–ª–∞—Ç–µ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- **123RF** - —Å—Ç–æ–∫–æ–≤–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞
- **Telegram Platform** - bot API

### üîÑ –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

#### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí Telegram Bot ‚Üí Backend API ‚Üí AI Provider ‚Üí Image Processing ‚Üí Storage ‚Üí Response
```

#### –ü–ª–∞—Ç–µ–∂–Ω—ã–π –ø–æ—Ç–æ–∫:
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí Payment Request ‚Üí YooMoney ‚Üí Webhook ‚Üí Backend ‚Üí Telegram Notification
```

#### –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å—Ç–æ–∫–∏:
```
Image ‚Üí Metadata Processing ‚Üí FTP Upload ‚Üí 123RF ‚Üí Status Update ‚Üí User Notification
```

---

## üìã API Reference Overview

### –û—Å–Ω–æ–≤–Ω—ã–µ –≥—Ä—É–ø–ø—ã endpoints

#### Images API (`/api/images/*`)
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ AI –º–æ–¥–µ–ª—è–º–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –∏ —Ñ–∞–π–ª–∞–º–∏
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—Ç–æ–∫–æ–≤—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
- –ü–æ—Ç–æ–∫–æ–≤–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

#### Payments API (`/api/payments/*`)
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π —á–µ—Ä–µ–∑ YooMoney
- Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ –∏ –±–∞–ª–∞–Ω—Å–æ–º
- –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π

#### Users API (`/api/users/*`)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –ø—Ä–æ—Ñ–∏–ª—è–º–∏
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç–æ–∫–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

#### Upload API (`/api/upload/*`)
- –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å—Ç–æ–∫–æ–≤—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–≥—Ä—É–∑–æ–∫
- Retry –º–µ—Ö–∞–Ω–∏–∑–º—ã

#### Admin API (`/api/admin/*`)
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ AI –º–æ–¥–µ–ª–µ–π
- –°–∏—Å—Ç–µ–º–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- –ê—É–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: [ADMIN_API_GUIDE.md](ADMIN_API_GUIDE.md)

---

## ü§ñ AI Models System

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –º–æ–¥–µ–ª–∏

1. **Juggernaut Pro Flux** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
   - –ü—Ä–æ–≤–∞–π–¥–µ—Ä: Segmind API
   - –ö–∞—á–µ—Å—Ç–≤–æ: –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è: –î–ª—è —Å—Ç–æ–∫–æ–≤—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

2. **DALL-E 3** (OpenAI)
   - –ü—Ä–æ–≤–∞–π–¥–µ—Ä: OpenAI API
   - –ö–∞—á–µ—Å—Ç–≤–æ: –ü—Ä–µ–º–∏—É–º —Å –æ—Ç–ª–∏—á–Ω—ã–º –ø–æ–Ω–∏–º–∞–Ω–∏–µ–º –ø—Ä–æ–º–ø—Ç–æ–≤
   - –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: Content filtering, revised prompts

3. **Seedream V3** (Segmind)
   - –ü—Ä–æ–≤–∞–π–¥–µ—Ä: Segmind API
   - –ö–∞—á–µ—Å—Ç–≤–æ: –•—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –∏ –∫—Ä–µ–∞—Ç–∏–≤–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
   - –°–∫–æ—Ä–æ—Å—Ç—å: –ë—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

4. **HiDream-I1 Fast** (Segmind)
   - –ü—Ä–æ–≤–∞–π–¥–µ—Ä: Segmind API
   - –ö–∞—á–µ—Å—Ç–≤–æ: –•–æ—Ä–æ—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ
   - –°–∫–æ—Ä–æ—Å—Ç—å: –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

### –°–∏—Å—Ç–µ–º–∞ —Ñ–æ–ª–ª–±–µ–∫–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ —Å–±–æ—è—Ö
- –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä –º–æ–¥–µ–ª–∏
- Fallback –Ω–∞ –¥–µ–º–æ-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –ü–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ø—ã—Ç–æ–∫

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [AI_MODELS_GUIDE.md](AI_MODELS_GUIDE.md)

---

## üí≥ Payment System

### YooMoney Integration
- **–°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Å—ã–ª–æ–∫
- **Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram
- **–ê—É–¥–∏—Ç** - –ø–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

### –¢–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã
```javascript
{
  "plan_10_images": { amount: 100, images: 10 },
  "plan_100_images": { amount: 500, images: 100 },
  "plan_1000_images": { amount: 2000, images: 1000 },
  "plan_10000_images": { amount: 15000, images: 10000 }
}
```

### Subscription Management
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- Real-time –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ –Ω—É–ª–µ–≤–æ–º –±–∞–ª–∞–Ω—Å–µ
- –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π

---

## üîß Configuration Management

### –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- **AppConfig –º–æ–¥–µ–ª—å** - –≥–∏–±–∫–∞—è —Å—Ö–µ–º–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **–ê—É–¥–∏—Ç** - –ø–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∞–≤—Ç–æ—Ä–∞
- **Hot reload** - –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

### –¢–∏–ø—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- **system** - —Å–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **ai-models** - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è AI –º–æ–¥–µ–ª–µ–π
- **payment** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
- **integration** - –≤–Ω–µ—à–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [DYNAMIC_AI_MODELS.md](DYNAMIC_AI_MODELS.md)

---

## üìä Data Models

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏

#### User Model
```javascript
{
  externalId: String,           // Telegram ID
  externalSystem: "telegram",   // –ò—Å—Ç–æ—á–Ω–∏–∫
  profile: { username, firstName, lastName, language },
  subscription: {
    isActive: Boolean,
    imagesRemaining: Number,
    expiresAt: Date
  },
  stockServices: {
    "123rf": { enabled, credentials, settings }
  },
  transactions: [{ type, amount, description, createdAt }]
}
```

#### Payment Model
```javascript
{
  paymentId: String,           // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
  userId: ObjectId,            // –í–ª–∞–¥–µ–ª–µ—Ü
  telegramId: String,          // –î–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
  amount: Number,              // –°—É–º–º–∞ –≤ —Ä—É–±–ª—è—Ö
  imagesCount: Number,         // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
  planType: String,            // –¢–∏–ø —Ç–∞—Ä–∏—Ñ–∞
  status: String,              // pending, completed, failed
  paymentUrl: String,          // –°—Å—ã–ª–∫–∞ YooMoney
  webhookData: Object,         // –î–∞–Ω–Ω—ã–µ webhook
  createdAt: Date,
  completedAt: Date
}
```

#### Image Model
```javascript
{
  userId: ObjectId,            // –í–ª–∞–¥–µ–ª–µ—Ü
  prompt: String,              // –ü—Ä–æ–º–ø—Ç
  model: String,               // AI –º–æ–¥–µ–ª—å
  provider: String,            // AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä
  filePath: String,            // –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É
  metadata: {
    width, height, format, fileSize, generatedAt
  },
  uploads: [{
    service: String,           // 123rf, shutterstock
    status: String,            // pending, completed, failed
    uploadedAt: Date,
    metadata: Object
  }]
}
```

#### AppConfig Model
```javascript
{
  key: String,                 // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á
  value: Object,               // –ó–Ω–∞—á–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
  type: String,                // system, ai-models, payment
  version: Number,             // –í–µ—Ä—Å–∏—è
  metadata: {
    description: String,
    updatedBy: String,
    updatedAt: Date
  }
}
```

---

## üê≥ Docker Infrastructure

### Production Services
- **backend** - Node.js API —Å–µ—Ä–≤–µ—Ä
- **tg-bot** - Telegram Bot —Å–µ—Ä–≤–∏—Å
- **mongodb** - MongoDB 7.0.5 —Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π
- **watchtower** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### Development Services
- **mongo-express** - Web UI –¥–ª—è MongoDB
- **tools** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### Docker Compose –ø—Ä–æ—Ñ–∏–ª–∏
- **backend** - —Ç–æ–ª—å–∫–æ backend + MongoDB
- **bot** - Telegram bot + backend + MongoDB
- **full** - –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
- **tools** - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [PRODUCTION.md](PRODUCTION.md)

---

## üîí Security & Performance

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ** - AES-256-GCM –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **Rate Limiting** - –∑–∞—â–∏—Ç–∞ –æ—Ç –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π
- **–í–∞–ª–∏–¥–∞—Ü–∏—è** - express-validator –¥–ª—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–ê—É–¥–∏—Ç** - –ø–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **CORS** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª–∏—Ç–∏–∫ –∫—Ä–æ—Å—Å-–¥–æ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ –ø–∞–º—è—Ç–∏
- **–ü–æ—Ç–æ–∫–æ–≤–∞—è –ø–µ—Ä–µ–¥–∞—á–∞** - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –±–µ–∑ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏
- **Connection pooling** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è MongoDB
- **–ò–Ω–¥–µ–∫—Å—ã** - –±—ã—Å—Ç—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- **–°–∂–∞—Ç–∏–µ** - HTTP response compression

---

## üöß Development & Deployment

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```bash
# Backend
cd backend && npm run dev

# Telegram Bot
cd tg-bot && npm start

# Docker development
docker-compose --profile full up -d
```

### Production deployment
```bash
# Production —Å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏
docker-compose -f docker-compose-prod.yml --env-file .env.prod up -d
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **Health checks** - `/health`, `/api/health`, `/api/admin/health`
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ –≤ JSON
- **–ú–µ—Ç—Ä–∏–∫–∏** - –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞, —É—Å–ø–µ—à–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π
- **Watchtower** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Docker –æ–±—Ä–∞–∑–æ–≤

---

## üîÆ Roadmap

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ ‚úÖ
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã —Å —Ñ–æ–ª–ª–±–µ–∫–∞–º–∏
- –°–∏—Å—Ç–µ–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π YooMoney —Å webhook
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å hot reload
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å —á–µ—Ä–µ–∑ API
- –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ü–æ—Ç–æ–∫–æ–≤–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è —Å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏

### –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ üîÑ
- Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- Unit –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- Swagger/OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Prometheus)

### –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è üìã
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–æ–∫–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã (Shutterstock, Adobe Stock)
- S3/MinIO –¥–ª—è —Ñ–∞–π–ª–æ–≤–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
- GraphQL API
- WebSocket –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- Batch processing API
- –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ —Ä–µ—Å—É—Ä—Å—ã

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ health checks: `curl http://localhost:3000/api/health`
2. –ò–∑—É—á–∏—Ç–µ –ª–æ–≥–∏: `docker-compose logs -f`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é: `curl http://localhost:3000/api/admin/config`
4. –°–æ–∑–¥–∞–π—Ç–µ Issue –≤ [GitHub](https://github.com/alexanderrodnin/ai-stock-bot)

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏
- [C4 Model Documentation](https://c4model.com/)
- [PlantUML Documentation](https://plantuml.com/)
- [Express.js Guide](https://expressjs.com/)
- [MongoDB Documentation](https://docs.mongodb.com/)
- [Docker Compose Reference](https://docs.docker.com/compose/)
- [YooMoney API](https://yoomoney.ru/docs/)

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **Node.js** 18+ –¥–ª—è backend –∏ bot
- **MongoDB** 7.0+ –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **Docker** –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏
- **Java** 8+ –¥–ª—è PlantUML –¥–∏–∞–≥—Ä–∞–º–º
- **VSCode** —Å PlantUML —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. —Ñ–∞–π–ª LICENSE –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞.
